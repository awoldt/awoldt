<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <script
      async=""
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>
    <title>Utilize Zod Validation Library for Custom Data Formatting</title>
    <meta
      name="description"
      content="
      Ensure correct data storage for your application by equalizing the potency of Zod with the following approach. Validate schemas and be confident in the data you are storing."
    />
    <link
      rel="canonical"
      href="https://awoldt.dev/blogs/why-you-should-use-zod"
    />
    <meta
      property="og:title"
      content="Utilize Zod Validation Library for Custom Data Formatting"
    />
    <meta
      property="og:description"
      content="Ensure correct data storage for your application by equalizing the potency of Zod with the following approach."
    />
    <meta
      property="og:url"
      content="https://awoldt.dev/blogs/why-you-should-use-zod"
    />
    <meta property="og:site_name" content="awoldt" />
    <meta property="og:locale" content="en_US" />
    <meta
      property="og:image"
      content="https://awoldt.dev/imgs/blogs/zod-code.png"
    />
    <meta property="og:type" content="article" />
    <meta
      property="article:published_time"
      content="2023-10-30T15:14:35.437Z"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Utilize Zod Validation Library for Custom Data Formatting"
    />
    <meta
      name="twitter:description"
      content="Ensure correct data storage for your application by equalizing the potency of Zod with the following approach."
    />
    <meta
      name="twitter:image"
      content="https://awoldt.dev/imgs/blogs/zod-code.png"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="/styles/global.css" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark-reasonable.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <script>
      hljs.highlightAll();
    </script>
  </head>
  <body>
    <div class="container-fluid">
      <nav class="navbar">
        <div class="container-fluid">
          <a class="navbar-brand" href="/">Awoldt</a>
          <div class="d-flex" role="search">
            <div style="margin-right: 20px"><a href="/blogs">Blogs</a></div>
            <div>
              <a href="/projects" style="text-decoration: none">Projects</a>
            </div>
          </div>
        </div>
      </nav>
      <div
        class="container pt-5"
        itemscope=""
        itemtype="https://schema.org/Blog"
      >
        <main>
          <div style="margin-bottom: 50px">
            <h1 style="margin-top: 75px; font-size: 50px" itemprop="about">
              Why You Should Use the Zod Library with Your Database
            </h1>
            <p class="text-secondary">
              Define and enforce data schemas, validate incoming data, and gain
              confidence that your data is in the expected format
            </p>
            <link
              href="https://cdn.jsdelivr.net/npm/shareon@2/dist/shareon.min.css"
              rel="stylesheet"
            />
            <div class="shareon" style="float: none">
              <a
                class="facebook"
                href="https://www.facebook.com/sharer/sharer.php?u=https://awoldt.dev/blogs/spotify-api-with-javascript"
              ></a
              ><a
                href="https://www.linkedin.com/sharing/share-offsite/?url=https://awoldt.dev/blogs/spotify-api-with-javascript"
                class="linkedin"
              ></a
              ><a
                class="reddit"
                href="https://www.reddit.com/submit?url=https://awoldt.dev/blogs/spotify-api-with-javascript"
              ></a
              ><a
                class="twitter"
                href="https://twitter.com/intent/tweet?url=https://awoldt.dev/blogs/spotify-api-with-javascript"
              ></a
              ><a class="copy-url"></a>
            </div>
          </div>

          <p>
            The Zod schema validator is a fantastic tool for any JavaScript
            application dealing with database storage. Say goodbye to the
            headache of wrestling with errors caused by wonky data formats! Zod
            swoops into the rescue, making sure your data is saved without a
            hitch. It's your secret weapon against those pesky format-related
            glitches.
          </p>

          <p>
            Here is how you can level the power of Zod to ensure correct data
            storage for your application
          </p>

          <p>
            <strong style="font-weight: normal"
              >This article will be using Nodejs and NPM for our applications
              environment. You can use vanilla JS or TypeScript to use Zod,
              although TypeScript will have better type-checking
              capabilities.</strong
            >
          </p>

          <h2>Download Zod from NPM</h2>

          <p>The Zod validation library can be installed with the command:</p>

          <pre>
            <code>npm install zod</code>
          </pre>

          <p>
            Now with Zod installed on your machine, we can define what your data
            should look like when stored
          </p>

          <h2>Create a Zod Schema</h2>
          <p>
            Create a new TypeScript file. Below is the code that will create a
            new Zod schema. This schema will act as the model for your data. Any
            objects with properties that differ from this schema will throw an
            error during runtime. This will help to prevent bad, malicious, or
            unwanted data from being stored in your database.
          </p>

          <pre>
            <code>import { z } from "zod";

const ProfileModel = z.object({
  bio: z.string().trim().nullable(),
  created_on: z.coerce.date(),
  email: z.string().trim().email(),
  first_name: z.string().trim(),
  last_name: z.string().trim(),
  username: z.string().trim(),
});</code>
          </pre>

          <p>
            Let's say for example we have a site where a person can sign up for
            an account. The properties we wanted to be stored on our customers
            are represented in the object above:
          </p>
          <ul>
            <li>Bio</li>
            <li>Date account created on</li>
            <li>Email</li>
            <li>First name</li>
            <li>Last name</li>
            <li>Username</li>
          </ul>

          <p>
            In our TypeScript code, we can use Zod to parse the object and make
            sure it's formatted correctly. There are two ways you can do this.
          </p>

          <ul>
            <li>
              <h3>parse</h3>

              <p>
                This function will take an object input, validate all the
                properties, and return an object with full-type functionality.
                If there is a property that does not line up with the schema, a
                new error is thrown. You can catch this error inside a try/catch
                block.
              </p>

              <pre>
              <code>import { z } from "zod";
  
const ProfileModel = z.object({
  bio: z.string().trim().nullable(),
  created_on: z.coerce.date(),
  email: z.string().trim().email(),
  first_name: z.string().trim(),
  last_name: z.string().trim(),
  username: z.string().trim(),
});

// you can be confident that validatedObject will be correctly formatted

const validatedObject = ProfileModel.parse({
  bio: "My name is Bob and I like to watch TV",
  created_on: 2023-11-21T13:45:12.474+00:00,
  email: "bob@mail.com",
  first_name: "Bob",
  last_name: "Smith",
  username: "b_smith",
});
</code>
            </pre>
              <p>
                If there was a property that did not match the Zod schema, say
                for example, the first name being a number instead of a string,
                there would be an error thrown.
              </p>

              <pre>
                <code>import { z } from "zod";
    
const ProfileModel = z.object({
  bio: z.string().trim().nullable(),
  created_on: z.coerce.date(),
  email: z.string().trim().email(),
  first_name: z.string().trim(),
  last_name: z.string().trim(),
  username: z.string().trim(),
});

// first_name below is set to a number instead of a string like in the schema above
// this code will throw a new error, which can be handled inside of a try catch block

try {
  const validatedObject = ProfileModel.parse({
    bio: "My name is Bob and I like to watch TV",
    created_on: 2023-11-21T13:45:12.474+00:00,
    email: "bob@mail.com",
    first_name: "Bob",
    last_name: 123456,
    username: "b_smith",
  });
}
catch(e) {
  console.log("Error while parsing object")
}</code>
              </pre>
            </li>

            <li>
              <h3>safeParse</h3>
              <p>
                Using the safeParse function on any object will do the same
                thing as the function above, except now you don't have to wrap
                inside a try/catch block. After parsing the object you can check
                if it is valid by:
              </p>

              <pre>
                <code>const ProfileModel = z.object({
  bio: z.string().trim().nullable(),
  created_on: z.coerce.date(),
  email: z.string().trim().email(),
  first_name: z.string().trim(),
  last_name: z.string().trim(),
  username: z.string().trim(),
});

const validatedObject = ProfileModel.safeParse({
  bio: "My name is Bob and I like to watch TV",
  created_on: 2023-11-21T13:45:12.474+00:00,
  email: "bob@mail.com",
  first_name: "Bob",
  last_name: 123456,
  username: "b_smith",
});

if (!validatedObject.success) {
  // ERROR
  console.log("There has been an error while parsing object");
} else {
  // do something
  console.log("Successfully parsed object!");
}</code>
              </pre>
            </li>
          </ul>

          <h2>Data Specific Validations/Transformations</h2>
          <p>
            Zod offers plenty of validation and transformation methods across a
            variety of data types. Validations ensure object properties are
            formatted correctly, while transformations will alter the property
            in some way. I will show examples from the:
          </p>
          <ul style="list-style: none">
            <li>
              <h3>
                <a href="https://zod.dev/?id=strings" target="_blank">String</a>
              </h3>
              <ol style="list-style: none">
                <li>
                  <b>trim()</b>
                  <p>Will remove all whitespace from both ends of a string</p>
                </li>

                <li>
                  <b>max() and min()</b>
                  <p>
                    Sets the max or min length of a string. max(256) would
                    ensure the string being stored is not any longer than 256
                    characters.
                  </p>
                </li>

                <li>
                  <b>email()</b>
                  <p>Make sure the string is in valid email format</p>
                </li>

                <li>
                  <b>regex()</b>
                  <p>
                    Use regular expressions to match character combinations in
                    strings
                  </p>
                </li>

                <li>
                  <b>includes()</b>
                  <p>
                    Checks to see if a given string may be found within this
                    string
                  </p>
                </li>

                <li>
                  <b>ip()</b>
                  <p>Parses ip string and ensures IPv4 and IPv6 formats</p>
                </li>
              </ol>
            </li>

            <li>
              <h3>
                <a href="https://zod.dev/?id=numbers" target="_blank">Number</a>
              </h3>
              <ol style="list-style: none">
                <li>
                  <b>gt()</b>
                  <p>Greater than</p>
                </li>
                <li>
                  <b>lt()</b>
                  <p>Less than</p>
                </li>
                <li>
                  <b>int()</b>
                  <p>The value must be of type int</p>
                </li>
                <li>
                  <b>positive()</b>
                  <p>The value must be greater than zero ( > 0)</p>
                </li>
                <li>
                  <b>negative()</b>
                  <p>The value must be less than zero ( < 0)</p>
                </li>
              </ol>
            </li>

            <li>
              <h3>
                <a href="https://zod.dev/?id=booleans" target="_blank"
                  >Boolean</a
                >
              </h3>
            </li>
            <li>
              <h3>
                <a href="https://zod.dev/?id=dates" target="_blank">Dates</a>
              </h3>
            </li>
            <li>
              <h3>
                <a href="https://zod.dev/?id=nullables" target="_blank"
                  >Nullables</a
                >
              </h3>
            </li>
            <li>
              <h3>
                <a href="https://zod.dev/?id=objects" target="_blank"
                  >Objects</a
                >
              </h3>
            </li>
          </ul>

          <p style="margin-bottom: 50px">
            Check out
            <a href="https://zod.dev/" target="_blank"
              >Zod's official documentation</a
            >
            to see a complete list of all the validation logic. Use Zod in your
            backend to ensure the objects being stored are in the exact format
            your program needs.
          </p>

          <div style="margin: 50px 0px 50px 0px">
            <h2 style="font-family: Silkscreen-Regular">More</h2>
            <a href="/blogs/spotify-api-with-javascript"
              >Start accessing user’s Spotify account data with Node.js
            </a>
          </div>
        </main>
      </div>
    </div>
  </body>
</html>
